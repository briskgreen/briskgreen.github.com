<html>
	<title>TimeSetter.c</title>
	<body>
		<pre>
#include &lttime.h&gt
#include &ltstdio.h&gt

void get_time(struct tm *tm)
{
	printf("请输入年份:");
	while(scanf("%d",&tm->tm_year))
		if(tm->tm_year<=0)
			printf("输入错误,请重新输入:");
	tm->tm_year+=1900;

	printf("请输入月份:");
	while(scanf("%d",&tm->tm_mon))
		if(tm->tm_mon>12 || tm->tm_mon<=0)
			printf("输入错误,请重新输入:");
	tm->tm_mon-=1;

	printf("请输入日期:");
	while(scanf("%d",&tm->tm_mday))
		if(tm->tm_mday>31 || tm->tm_mday<1)
			printf("输入错误,请重新输入:");

	printf("请输入小时:");
	while(scanf("%d",&tm->tm_hour))
		if(tm->tm_hour>23 || tm->tm_hour<0)
			printf("输入错误,请重新输入:");

	printf("请输入分钟:");
	while(scanf("%d",&tm->tm_min))
		if(tm->tm_min>59 || tm->tm_min<0)
			printf("输入错误,请重新输入:");

	printf("请输入钞数:");
	while(scanf("%d",&tm->tm_sec))
		if(tm->tm_sec>59 || tm->tm_sec<0)
			printf("输入错误,请重新输入:");
}

int main(void)
{
	time_t t;
	struct tm tm;
	
	get_time(&tm);

	t=mktime(&tm);
	stime(&t);
	printf("时间设置成功:%s",ctime(&t));

	return 0;
}
</pre>
	</body>
</html>
